<div class="table-wrapper">
  <ng-container *ngIf="data?.data.length === 0">
    <div class="no-records-found">
      <p>{{ "result_not_found_label" | translate }}</p>
    </div>
  </ng-container>
  <table
    mat-table
    multiTemplateDataRows
    *ngIf="data?.data.length > 0"
    [dataSource]="data"
    class="records-table"
    [ngClass]="className"
  >
    <ng-container *ngFor="let column of columns" [matColumnDef]="column?.columnDef">
      <th mat-header-cell *matHeaderCellDef>{{ column?.columnHeader }}</th>

      <!-- Serial Number column -->
      <ng-container *ngIf="column?.columnDef === 'sn'">
        <td mat-cell *matCellDef="let object; let i = dataIndex">
          {{ getSerialNumberForPaginatedList(i, paginatorCmp.pageIndex, paginatorCmp.pageSize) }}
        </td>
      </ng-container>

      <!-- Thumbnail column -->
      <ng-container *ngIf="column?.columnDef === 'thumbnail'">
        <td mat-cell *matCellDef="let object">
          <figure lightbox-group class="is-rounded-image w-32">
            <img lightbox [src]="object[column?.propName]?.smallFileUrl | imagePath" />
          </figure>
        </td>
      </ng-container>

      <!-- Actions column -->
      <ng-container *ngIf="column?.columnDef === 'actions'">
        <td mat-cell *matCellDef="let object">
          <app-card-action
            [canEdit]="object?.canEdit"
            [canDelete]="object?.canDelete"
            (viewClicked)="viewClicked(object)"
            (editClicked)="editClicked(object)"
            (deleteClicked)="deleteClicked(object)"
          ></app-card-action>
        </td>
      </ng-container>

      <!-- Other columns -->
      <ng-container
        *ngIf="column?.columnDef !== 'sn' && column?.columnDef !== 'actions' && column?.columnDef !== 'thumbnail'"
      >
        <!-- Date type column -->
        <ng-container *ngIf="column?.propType === 'date'; else elseBlock">
          <td mat-cell *matCellDef="let object">{{ object[column?.propName] | utcToLocalDate: "ddd, ll" }}</td>
        </ng-container>
        <!-- Column rather than Date type -->
        <ng-template #elseBlock>
          <td mat-cell *matCellDef="let object">{{ object[column?.propName] || "na_label" | translate }}</td>
        </ng-template>
      </ng-container>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
  </table>

  <mat-paginator
    #paginatorCmp
    [length]="listLength"
    [pageSize]="perPage"
    [pageSizeOptions]="getDefaultPageSizeOptions()"
    showFirstLastButtons
  >
  </mat-paginator>
</div>
